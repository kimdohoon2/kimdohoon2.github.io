---
layout: single
title: "ê°œì¸ í”„ë¡œì íŠ¸ íšŒê³ : ë¬´í•œìŠ¤í¬ë¡¤ VS íŽ˜ì´ì§€ë„¤ì´ì…˜"
categories: ê°œì¸ í”„ë¡œì íŠ¸ íšŒê³ 
tag: [ê°œì¸ í”„ë¡œì íŠ¸, ë¬´í•œìŠ¤í¬ë¡¤, íŽ˜ì´ì§€ë„¤ì´ì…˜, ì‚¬ìš©ìžê²½í—˜, React-query]
toc: true
author_profile: false
# sidebar:
#     nav: "counts"
# search: true
---

### ðŸ¤” ê³ ë¯¼ ìƒí™©

ê°œì¸ í”„ë¡œì íŠ¸ì—ì„œ **ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” íŽ˜ì´ì§€**ê°€ ë‘ ê°œ ìžˆì—ˆë‹¤.

ì´ íŽ˜ì´ì§€ë“¤ì„ ì–´ë–»ê²Œ êµ¬í˜„í•´ì•¼ **ì‚¬ìš©ìžê°€ ë” ì¢‹ì€ ê²½í—˜ì„ í•  ìˆ˜ ìžˆì„ê¹Œ?** ë¼ëŠ” ê³ ë¯¼ì´ ìƒê²¼ë‹¤.

### ðŸ’­ ë°©í–¥ì„±

ë¨¼ì €, ë‚´ê°€ ìžì£¼ ì‚¬ìš©í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ë“¤ì´ **ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ í‘œì‹œí•˜ëŠ”ì§€ ë¶„ì„**í–ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ **ìœ íŠœë¸Œ, ì¸ìŠ¤íƒ€ê·¸ëž¨, íŽ˜ì´ìŠ¤ë¶ì€ ë¬´í•œìŠ¤í¬ë¡¤** ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì´ë“¤ì€ **ì™œ ë¬´í•œìŠ¤í¬ë¡¤ì„ ì„ íƒí–ˆì„ê¹Œ?**

### ðŸ”„ ë¬´í•œìŠ¤í¬ë¡¤ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì´íŠ¸ â€“ ìœ íŠœë¸Œ, ì¸ìŠ¤íƒ€ê·¸ëž¨, íŽ˜ì´ìŠ¤ë¶

ë¬´í•œìŠ¤í¬ë¡¤ì„ ì ìš©í•˜ëŠ” ì‚¬ì´íŠ¸ë“¤ì˜ ê³µí†µì ì€ **ëŠìž„ì—†ëŠ” ì½˜í…ì¸  ì†Œë¹„**ë¥¼ ìœ ë„í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ë‚´ê°€ ìƒê°í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

- í˜„ëŒ€ì¸ë“¤ì€ ìœ íŠœë¸Œ ì‡¼ì¸ , ì¸ìŠ¤íƒ€ê·¸ëž¨ ë¦´ìŠ¤, íŽ˜ì´ìŠ¤ë¶ í”¼ë“œë¥¼ **ë¬´ì˜ì‹ì ìœ¼ë¡œ ì†Œë¹„**í•˜ëŠ” ê²½ìš°ê°€ ë§Žë‹¤.
- ì´ëŸ¬í•œ í”Œëž«í¼ì—ì„œëŠ” ì‚¬ìš©ìžê°€ **ëª…í™•í•œ ëª©í‘œ ì—†ì´ íƒìƒ‰**í•˜ëŠ” ê²½ìš°ê°€ ë§Žë‹¤.
- ì¦‰, íŠ¹ì • ì •ë³´ë¥¼ ì°¾ê¸°ë³´ë‹¤ëŠ” **ìƒˆë¡œìš´ ì½˜í…ì¸ ë¥¼ ë°œê²¬í•˜ëŠ” ê²½í—˜ì´ ë” ì¤‘ìš”**í•˜ë‹¤.
- ë§Œì•½ íŽ˜ì´ì§€ë„¤ì´ì…˜ì„ ì ìš©í•œë‹¤ë©´, ì‚¬ìš©ìžê°€ ë‹¤ìŒ ì½˜í…ì¸ ë¥¼ ë³´ê¸° ìœ„í•´ **ëŠ¥ë™ì ìœ¼ë¡œ í´ë¦­**í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìƒê¸´ë‹¤.
- ë°˜ë©´, **ë¬´í•œìŠ¤í¬ë¡¤ ë°©ì‹ì€ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ê¸°ë§Œ í•´ë„ ìžì—°ìŠ¤ëŸ½ê²Œ ì½˜í…ì¸ ê°€ ì´ì–´ì§€ë¯€ë¡œ ëª°ìž…ê°ì„ ì œê³µ**í•  ìˆ˜ ìžˆë‹¤.
- ì´ëŸ¬í•œ ì„¤ê³„ëŠ” **ì´íƒˆë¥ ì„ ë‚®ì¶”ê³  ì²´ë¥˜ ì‹œê°„ì„ ì¦ê°€**ì‹œí‚¤ëŠ” íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìžˆë‹¤.

ë”°ë¼ì„œ ìœ íŠœë¸Œ, ì¸ìŠ¤íƒ€ê·¸ëž¨, íŽ˜ì´ìŠ¤ë¶ê³¼ ê°™ì€ í”Œëž«í¼ì—ì„œëŠ” ë¬´í•œìŠ¤í¬ë¡¤ì„ ì„ íƒí•œ ì´ìœ ê°€ ì•„ë‹ê¹Œ?

### ðŸ“„ íŽ˜ì´ì§€ë„¤ì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì´íŠ¸ â€“ ë„¤ì´ë²„, êµ¬ê¸€

ë°˜ë©´, ë„¤ì´ë²„ë‚˜ êµ¬ê¸€ì€ **íŽ˜ì´ì§€ë„¤ì´ì…˜**ì„ ì‚¬ìš©í•œë‹¤. ì™œ ê·¸ëŸ´ê¹Œ?

- ì´ ì‚¬ì´íŠ¸ë“¤ì€ ê²€**ìƒ‰ì´ í•µì‹¬ ê¸°ëŠ¥**ì´ë‹¤.
- ì‚¬ìš©ìžëŠ” íŠ¹ì • í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•˜ê³ , ì›í•˜ëŠ” ì •ë³´ë¥¼ ì°¾ê¸° ìœ„í•´ ì—¬ëŸ¬ íŽ˜ì´ì§€ë¥¼ íƒìƒ‰í•œë‹¤.

ë”°ë¼ì„œ **"ë‚´ê°€ 2íŽ˜ì´ì§€ì—ì„œ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì°¾ì•˜ë‹¤"**ëŠ” ê±¸ ê¸°ì–µí•˜ê³ , ì´í›„ì—ë„ ê°™ì€ ìœ„ì¹˜ì—ì„œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìžˆë„ë¡ íŽ˜ì´ì§€ë„¤ì´ì…˜ì´ ì í•©í•˜ë‹¤.

ê²°êµ­, **ì„œë¹„ìŠ¤ì˜ ëª©ì ê³¼ ì‚¬ìš©ìž ê²½í—˜ì„ ê³ ë ¤í•´ ë¬´í•œìŠ¤í¬ë¡¤ê³¼ íŽ˜ì´ì§€ë„¤ì´ì…˜ì„ ì„ íƒí•´ì•¼ í•œë‹¤ëŠ” ì ì„ ë°°ì› ë‹¤.**

ê·¸ëž˜ì„œ ë‚´ í”„ë¡œì íŠ¸ì—ì„œë„ íŽ˜ì´ì§€ì˜ íŠ¹ì„±ì— ë§žê²Œ ë‘ ê°€ì§€ ë°©ì‹ì„ ì ìš©í–ˆë‹¤.

### âš™ï¸ ì ìš© ë°©ë²•

#### 1. ê²€ìƒ‰ ê²°ê³¼ íŽ˜ì´ì§€ â†’ íŽ˜ì´ì§€ë„¤ì´ì…˜ ì ìš©

ì‚¬ìš©ìžê°€ íŠ¹ì • ì§€ì—­(ì˜ˆ: ëŒ€ì „)ì„ ê²€ìƒ‰í•˜ë©´ ê´€ë ¨ëœ ê´€ê´‘ì§€, ë¬¸í™”ì‹œì„¤, í–‰ì‚¬, ìˆ™ë°•, ìŒì‹ì ì— ê´€í•œ ë°ì´í„°ë¥¼ ê° 8ê°œì”© ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œëœë‹¤.
ê° ì¹´í…Œê³ ë¦¬ì—ì„œ **â€˜ë”ë³´ê¸°â€™**ë¥¼ ëˆ„ë¥´ë©´ í•´ë‹¹í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì—ì„œ íŽ˜ì´ì§€ë„¤ì´ì…˜ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ êµ¬í˜„í–ˆë‹¤.

```tsx
const getPageNumbers = () => {
  const pageNumbers = [];
  let startPage = Math.max(1, currentPage - 2);
  const endPage = Math.min(totalPages, startPage + 5);

  if (endPage - startPage < 5) {
    startPage = Math.max(1, endPage - 5);
  }

  for (let i = startPage; i <= endPage; i++) {
    pageNumbers.push(i);
  }

  return pageNumbers;
};
```

ìœ„ ì½”ë“œëŠ” ì‚¬ìš©ìžê°€ ê²€ìƒ‰í•œ ë°ì´í„°ë¥¼ íŽ˜ì´ì§€ ë‹¨ìœ„ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•˜ë©°, ì‹œìž‘ íŽ˜ì´ì§€ì™€ ë íŽ˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ê³„ì‚°í•´ì„œ ë¶ˆí•„ìš”í•œ íŽ˜ì´ì§€ ë²„íŠ¼ì„ í‘œì‹œí•˜ì§€ ì•Šë„ë¡ í–ˆë‹¤.

#### 2. ì¸ê¸° ì—¬í–‰ì§€ ëª©ë¡ íŽ˜ì´ì§€ â†’ ë¬´í•œìŠ¤í¬ë¡¤ ì ìš© ðŸ”„

ë‹¤ì–‘í•œ ì§€ì—­ì˜ ì¸ê¸° ì—¬í–‰ì§€, ë§›ì§‘, ìˆ™ì†Œ ì •ë³´ë¥¼ ìµœëŒ€ 100ê°œê¹Œì§€ ë³´ì—¬ì£¼ëŠ” íŽ˜ì´ì§€ì—ì„œëŠ” ë¬´í•œ ìŠ¤í¬ë¡¤ ë°©ì‹ì„ ì ìš©í–ˆë‹¤.

ì‚¬ìš©ìžê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ ì¶”ê°€ ë°ì´í„°ë¥¼ ìžë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ, í•œ ë²ˆì— 24ê°œì”© ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  í™”ë©´ì— í‘œì‹œë˜ëŠ” í•­ëª©ì„ ìµœëŒ€ 100ê°œë¡œ ì œí•œí•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ì¤„ì˜€ë‹¤.

##### React Queryë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ìºì‹œí•˜ê³ , useTourDataInfinitesí›…ì„ ë§Œë“¤ì—ˆë‹¤.

```tsx
import { useInfiniteQuery } from "@tanstack/react-query";
import { getTourListApi } from "@/app/api/getTourListApi";
import { AreaItem } from "@/app/types/ItemType";

const useTourDataInfinites = (
  selectedArea: string,
  numOfRows: number,
  selectedCategory: string,
  initialData?: AreaItem[]
) => {
  return useInfiniteQuery<AreaItem[], Error>({
    queryKey: ["tourList", selectedArea, selectedCategory],
    queryFn: ({ pageParam = 1 }) =>
      getTourListApi(
        selectedArea,
        numOfRows,
        pageParam as number,
        selectedCategory
      ),
    initialPageParam: 1,
    getNextPageParam: (lastPage, allPages) => {
      return lastPage.length < numOfRows ? undefined : allPages.length + 1;
    },
    initialData: initialData
      ? {
          pages: [initialData],
          pageParams: [1],
        }
      : undefined,
    staleTime: 1000 * 60 * 5, // 5ë¶„ ë™ì•ˆ ë°ì´í„°ë¥¼ ìœ ì§€
    gcTime: 1000 * 60 * 30, // 30ë¶„ ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ ì œê±°
  });
};

export default useTourDataInfinites;
```

- getNextPageParam: ë§ˆì§€ë§‰ íŽ˜ì´ì§€ê°€ ì£¼ì–´ì§„ numOfRowsë³´ë‹¤ ì ìœ¼ë©´ ë” ì´ìƒ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ ì•Šë„ë¡ ì„¤ì •.
- staleTimeê³¼ gcTime: ë°ì´í„°ë¥¼ ì¼ì • ì‹œê°„ ë™ì•ˆ ìž¬ì‚¬ìš©í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€.

#### react-intersection-observer: ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ê°ì§€í•˜ì—¬ ë°ì´í„° ë¡œë“œ

```tsx
useEffect(() => {
  if (inView && hasNextPage && moreData.pages.flat().length < MAX_ITEMS) {
    fetchNextPage();
  }
}, [inView, hasNextPage, fetchNextPage, moreData]);
```

- inView: react-intersection-observerë¡œ ìŠ¤í¬ë¡¤ì´ í™”ë©´ì— ë³´ì´ëŠ”ì§€ ê°ì§€.
- hasNextPage: ë‹¤ìŒ íŽ˜ì´ì§€ê°€ ìžˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ì¤‘ë³µëœ ìš”ì²­ì„ ë§‰ìŒ.
- fetchNextPage(): inViewê°€ trueê°€ ë˜ë©´ ìžë™ìœ¼ë¡œ ë‹¤ìŒ íŽ˜ì´ì§€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

#### ì„±ëŠ¥ ìµœì í™” ì´ˆê¸° íŽ˜ì´ì§€ ë¡œë”© ì†ë„ ê°œì„ 

- í•„ìš”í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì„¤ì •í•˜ì—¬ ì´ˆê¸° íŽ˜ì´ì§€ ë¡œë”© ì†ë„ë¥¼ 20% ê°œì„ .
- API í˜¸ì¶œ íšŸìˆ˜ ì ˆê°: ìºì‹œëœ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ 50% ì´ìƒ ì¤„ì˜€ìŠµë‹ˆë‹¤.
- ìœ„ ì½”ë“œì²˜ëŸ¼, useTourDataInfinitesì™€ react-intersection-observerë¥¼ ê²°í•©í•˜ì—¬ ì‚¬ìš©ìž ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê³ , ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤!

### ðŸŽ¯ ë°°ìš´ ì 

ì´ë²ˆ ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì‚¬ìš©ìž ê²½í—˜ì„ ê³ ë ¤í•œ UI/UX ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ í•œ ë²ˆ ê¹¨ë‹¬ì•˜ë‹¤.

- ë‹¨ìˆœížˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
- ì‚¬ìš©ìžê°€ ì–´ë–»ê²Œ ì •ë³´ë¥¼ ì†Œë¹„í•˜ëŠ”ì§€?
- ì–´ë–¤ ë°©ì‹ì´ ë” ì§ê´€ì ì¸ì§€?
- ì„±ëŠ¥ ìµœì í™”ê¹Œì§€ ê³ ë ¤í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¸ì§€?

ì´ëŸ° ìš”ì†Œë“¤ì„ ê³ ë¯¼í•˜ë©´ì„œ ê°œë°œí•´ì•¼ í•œë‹¤ëŠ” ì ì„ ì‹¤ê°í–ˆë‹¤.

ì•žìœ¼ë¡œë„ ë‹¨ìˆœí•œ ê¸°ëŠ¥ êµ¬í˜„ì´ ì•„ë‹ˆë¼, ì‚¬ìš©ìž ì¤‘ì‹¬ì˜ ê°œë°œì„ ê³ ë¯¼í•˜ë©° ì„±ìž¥í•˜ëŠ” ê°œë°œìžê°€ ë˜ê³  ì‹¶ë‹¤.
